# Next.js v14 Streaming SSR Demo

このアプリケーションは、Next.js v14の従来のStreaming SSRの動作を体感できるデモアプリです。PPRとの比較用として作成されています。

## 🌊 Streaming SSRの特徴

従来のStreaming SSRは以下の動作をします：

- **全コンテンツ**: リクエスト時にサーバーでレンダリング
- **順次配信**: Suspenseによる部分的なストリーミング
- **制約**: 重い静的コンテンツがあると初期表示が遅延

## 📁 プロジェクト構造

```
src/
├── app/
│   └── page.tsx           # 従来のSSRページ
├── components/
│   ├── HeavyStaticContent.tsx  # 重い静的コンテンツ
│   └── DynamicContent.tsx      # 動的コンテンツ（Suspense使用）
```

## 🛠 技術スタック

- **Next.js**: v14.x (PPR無効)
- **React**: v18.x
- **TypeScript**: v5.x
- **Tailwind CSS**: v3.x
- **ESLint**: v8.x

## 🏃‍♂️ 開発サーバーの起動

```bash
npm install
npm run dev
```

http://localhost:3000 でアプリケーションが起動します。

## 🔬 パフォーマンス体感のポイント

1. **初回アクセス**: 重い静的コンテンツの処理完了まで待機が必要
2. **動的部分**: ユーザー情報が3秒後にストリーミングされる
3. **体感速度**: 静的部分の重い処理により初期表示が遅延

## 📊 v15 PPRとの比較

同じディレクトリの `nextjs15-ppr-demo` と比較することで、PPRの効果を実感できます：

- **Streaming SSR**: 全コンテンツの準備が完了してから表示開始
- **PPR**: 静的部分が即座に表示される

## ⚠️ パフォーマンスの制約

従来のStreaming SSRでは以下の制約があります：

1. **重い静的処理**: サーバーサイドでの計算集約的タスクがFTT（First Time to Paint）を遅延
2. **ブロッキング**: 静的部分の処理完了まで画面が表示されない
3. **ユーザー体験**: 白い画面での待機時間が発生

## 🔧 設定

特別な設定は不要です。Next.js v14のデフォルトのApp Routerを使用します。

## 📝 測定のポイント

以下を比較して効果を体感してください：

1. **初期表示速度**: ページアクセスから最初のコンテンツが見えるまでの時間
2. **体感パフォーマンス**: ユーザーが「速い」と感じるかどうか
3. **インタラクティブ性**: 動的部分の読み込み中でも静的部分は操作可能か

## 🎯 比較テスト手順

1. 両方のアプリを本番ビルドする
2. 同じ環境・ネットワーク条件でテスト
3. ブラウザのDevToolsでパフォーマンスを測定
4. 体感的な速度差を確認
